{"version":3,"sources":["components/currencyRate/currencyRate.module.css","components/Tooltip/Tooltip.jsx","components/currencyRate/CurrencyRate.jsx","context/rateContext/RateContext.jsx","App.js","reportWebVitals.js","api.js","context/types.js","context/rateContext/rateReducer.js","context/rateContext/RateState.jsx","index.js","components/Tooltip/tooltip.module.css"],"names":["module","exports","Tooltip","children","text","rest","useState","show","setShow","left","top","mousePosition","setMousePosition","className","s","tooltip_container","onMouseMove","e","pageX","pageY","handleMouseMove","tooltip_box","visible","style","tooltip_arrow","onMouseEnter","onMouseLeave","CurrencyRate","rates","setData","setDataOneRate","dataOneRate","dataForTenDays","showDataForTenDays","useEffect","currencyList","Object","values","map","currency","Name","onChange","console","log","itemList","onClick","getDataOneRate","CharCode","Value","todayCourse","yesterdayCourse","Previous","toFixed","ID","listTenDays","item","i","date","RateContext","React","createContext","App","useContext","app","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","API","getRates","a","fetch","response","json","error","getRatesForTenDays","url","GET_DATA","GET_DATA_FOR_TEN_DAYS","GET_DATA_ONE_RATE","handlers","state","action","data","Valute","currencyRatesForTenDays","dataPreviousDay","Date","substring","rate","reverse","rateReducer","type","DEFAULT","RateState","useReducer","dispatch","useCallback","setCurrencyRatesForTenDays","PreviousURL","previousURL","Provider","value","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9243b476.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"currencyList\":\"currencyRate_currencyList__GCWbK\",\"itemList\":\"currencyRate_itemList__2lGQl\",\"listTenDays\":\"currencyRate_listTenDays__3PV5p\"};","import React, { useState } from 'react'\r\nimport s from './tooltip.module.css'\r\n\r\nexport const Tooltip = ({ children, text, ...rest }) => {\r\n  const [show, setShow] = useState(false)\r\n  const [mousePosition, setMousePosition] = useState({\r\n    left: 0,\r\n    top: 0,\r\n  })\r\n\r\n  const handleMouseMove = e => {\r\n    setMousePosition({ left: e.pageX, top: e.pageY })\r\n  }\r\n\r\n  return (\r\n    <div className={s.tooltip_container} onMouseMove={e => handleMouseMove(e)}>\r\n      <div\r\n        className={show ? `${s.tooltip_box} ${s.visible}` : s.tooltip_box}\r\n        style={{ left: mousePosition.left - 10, top: mousePosition.top + 25 }}\r\n      >\r\n        {text}\r\n        <span className={s.tooltip_arrow} />\r\n      </div>\r\n      <div onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)} {...rest}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Tooltip } from '../Tooltip/Tooltip'\r\nimport s from './currencyRate.module.css'\r\n\r\nexport const CurrencyRate = ({ rates, setData, setDataOneRate, dataOneRate }) => {\r\n  const [dataForTenDays, showDataForTenDays] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setData()\r\n  }, [setData])\r\n\r\n  if (!rates) {\r\n    return <h1>Подождите идёт загрузка....</h1>\r\n  }\r\n\r\n  const getDataOneRate = currency => {\r\n    showDataForTenDays(true)\r\n    setDataOneRate(currency)\r\n  }\r\n\r\n  const courseDifference = (todayCourse, yesterdayCourse) => {\r\n    const num = ((todayCourse - yesterdayCourse) / yesterdayCourse) * 100\r\n    return num.toFixed(3)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ul className={s.currencyList}>\r\n        {Object.values(rates).map(currency => (\r\n          <Tooltip text={currency.Name} key={currency.ID} onChange={e => console.log(e)}>\r\n            <li className={s.itemList} onClick={() => getDataOneRate(currency.CharCode)}>\r\n              <span className='charCode'>{currency.CharCode} </span>\r\n              <span className='value'>{currency.Value} </span>\r\n              <span className='courseDifference'>% {courseDifference(currency.Value, currency.Previous)} </span>\r\n            </li>\r\n          </Tooltip>\r\n        ))}\r\n      </ul>\r\n\r\n      {dataForTenDays && (\r\n        <div className={s.listTenDays}>\r\n          <span>Курс выбранной валюты за десять дней</span>\r\n\r\n          {dataOneRate.map((item, i) => (\r\n            <div key={i}>\r\n              <b>\r\n                <span>{item.currency.CharCode} </span>\r\n              </b>\r\n              <span>{item.date} </span>\r\n              <b>\r\n                <span>{item.currency.Value}</span>\r\n              </b>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport const RateContext = React.createContext()","import React, { useContext } from 'react'\nimport './App.css'\nimport s from './App.css'\nimport { CurrencyRate } from './components/currencyRate/CurrencyRate'\nimport { RateContext } from './context/rateContext/RateContext'\n\nfunction App() {\n  const { setData, setDataOneRate, rates, dataOneRate } = useContext(RateContext)\n\n  return (\n    <div className={s.app}>\n      <h1>Курс валют</h1>\n      <CurrencyRate rates={rates} setData={setData} setDataOneRate={setDataOneRate} dataOneRate={dataOneRate} />\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const API = {\r\n  getRates: async () => {\r\n    try {\r\n      const response = await fetch('https://www.cbr-xml-daily.ru/daily_json.js')\r\n      return response.json()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  },\r\n  getRatesForTenDays: async url => {\r\n    try {\r\n      const response = await fetch(url)\r\n      return response.json()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  },\r\n}\r\n","export const GET_DATA = 'GET_DATA'\r\nexport const GET_DATA_FOR_TEN_DAYS = 'GET_DATA_FOR_TEN_DAYS'\r\nexport const GET_DATA_ONE_RATE = 'GET_DATA_ONE_RATE'\r\n","import { GET_DATA, GET_DATA_FOR_TEN_DAYS, GET_DATA_ONE_RATE } from '../types'\r\n\r\nconst handlers = {\r\n  [GET_DATA]: (state, action) => ({\r\n    ...state,\r\n    rates: action.data.Valute,\r\n  }),\r\n  [GET_DATA_FOR_TEN_DAYS]: (state, action) => ({\r\n    ...state,\r\n    currencyRatesForTenDays: [...state.currencyRatesForTenDays, action.dataPreviousDay],\r\n  }),\r\n  [GET_DATA_ONE_RATE]: (state, action) => ({\r\n    ...state,\r\n    dataOneRate: state.currencyRatesForTenDays\r\n      .map(rates => {\r\n        return {\r\n          date: rates.Date.substring(0, 10),\r\n          currency: rates.Valute[action.rate],\r\n        }\r\n      })\r\n      .reverse(),\r\n  }),\r\n\r\n  DEFAULT: state => state,\r\n}\r\n\r\nexport const rateReducer = (state, action) => {\r\n  const handler = handlers[action.type] || handlers.DEFAULT\r\n  return handler(state, action)\r\n}\r\n","import React, { useCallback, useReducer } from 'react'\r\nimport { API } from '../../api'\r\nimport { GET_DATA, GET_DATA_FOR_TEN_DAYS, GET_DATA_ONE_RATE } from '../types'\r\nimport { RateContext } from './RateContext'\r\nimport { rateReducer } from './rateReducer'\r\n\r\nexport const RateState = ({ children }) => {\r\n  const initialState = {\r\n    rates: null,\r\n    dataOneRate: null,\r\n    currencyRatesForTenDays: [],\r\n  }\r\n\r\n  const [state, dispatch] = useReducer(rateReducer, initialState)\r\n\r\n  const setData = useCallback(async () => {\r\n    const data = await API.getRates()\r\n    dispatch({ type: GET_DATA, data })\r\n    await setCurrencyRatesForTenDays(data.PreviousURL)\r\n  }, [])\r\n\r\n  const setCurrencyRatesForTenDays = async url => {\r\n    let previousURL = url\r\n    for (let i = 0; i < 10; i++) {\r\n      const dataPreviousDay = await API.getRatesForTenDays(previousURL)\r\n      dispatch({ type: GET_DATA_FOR_TEN_DAYS, dataPreviousDay })\r\n      previousURL = dataPreviousDay.PreviousURL\r\n    }\r\n  }\r\n\r\n  const setDataOneRate = async rate => {\r\n    dispatch({ type: GET_DATA_ONE_RATE, rate })\r\n  }\r\n\r\n  return (\r\n    <RateContext.Provider\r\n      value={{\r\n        rates: state.rates,\r\n        dataOneRate: state.dataOneRate,\r\n        setData,\r\n        setDataOneRate,\r\n      }}\r\n    >\r\n      {children}\r\n    </RateContext.Provider>\r\n  )\r\n}\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport { RateState } from './context/rateContext/RateState'\n\nReactDOM.render(\n  <RateState>\n    <App />\n  </RateState>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tooltip_box\":\"tooltip_tooltip_box__2y65k\",\"visible\":\"tooltip_visible__3ud--\",\"tooltip_arrow\":\"tooltip_tooltip_arrow__Vsrsm\"};"],"sourceRoot":""}