{"version":3,"sources":["components/Tooltip/Tooltip.jsx","components/currencyRate/CurrencyRate.jsx","context/rateContext/RateContext.jsx","App.js","reportWebVitals.js","api.js","context/types.js","context/rateContext/rateReducer.js","context/rateContext/RateState.jsx","index.js","components/Tooltip/tooltip.module.css"],"names":["Tooltip","children","text","rest","useState","show","setShow","className","s","tooltip_container","tooltip_box","visible","tooltip_arrow","onMouseEnter","onMouseLeave","CurrencyRate","rates","setData","useEffect","Object","values","map","currency","Name","onChange","e","console","log","CharCode","Value","todayCourse","yesterdayCourse","Previous","toFixed","ID","RateContext","React","createContext","App","useContext","setDataOneRate","dataOneRate","app","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","API","getRates","a","fetch","response","json","error","getRatesForTenDays","url","GET_DATA","GET_DATA_FOR_TEN_DAYS","GET_DATA_ONE_RATE","handlers","state","action","data","Valute","currencyRatesForTenDays","dataPreviousDay","filter","rate","rateReducer","type","DEFAULT","RateState","useReducer","dispatch","setCurrencyRatesForTenDays","PreviousURL","previousURL","i","Provider","value","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.49ab7996.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport s from './tooltip.module.css'\r\n\r\nexport const Tooltip = ({ children, text, ...rest }) => {\r\n  const [show, setShow] = useState(false)\r\n\r\n  return (\r\n    <div className={s.tooltip_container}>\r\n      <div className={show ? `${s.tooltip_box} ${s.visible}` : s.tooltip_box}>\r\n        {text}\r\n        <span className={s.tooltip_arrow} />\r\n      </div>\r\n      <div onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)} {...rest}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { Tooltip } from '../Tooltip/Tooltip'\r\n\r\nexport const CurrencyRate = ({ rates, setData }) => {\r\n  useEffect(() => {\r\n    setData()\r\n  }, [])\r\n\r\n  if (!rates) {\r\n    return <h1>Подождите идёт загрузка....</h1>\r\n  }\r\n\r\n  const courseDifference = (todayCourse, yesterdayCourse) => {\r\n    const num = ((todayCourse - yesterdayCourse) / yesterdayCourse) * 100\r\n    return num.toFixed(3)\r\n  }\r\n\r\n  return (\r\n    <ul>\r\n      {Object.values(rates).map(currency => (\r\n        <Tooltip text={currency.Name} key={currency.ID} onChange={e => console.log(e)}>\r\n          <li className='item'>\r\n            <span className='charCode'>{currency.CharCode} </span>\r\n            <span className='value'>{currency.Value} </span>\r\n            <span className='courseDifference'>% {courseDifference(currency.Value, currency.Previous)} </span>\r\n          </li>\r\n        </Tooltip>\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport const RateContext = React.createContext()","import React, { useContext } from 'react'\nimport './App.css'\nimport s from './App.css'\nimport { CurrencyRate } from './components/currencyRate/CurrencyRate'\nimport { RateContext } from './context/rateContext/RateContext'\n\nfunction App() {\n  const { setData, setDataOneRate, rates, dataOneRate } = useContext(RateContext)\n\n  return (\n    <div className={s.app}>\n      <h1>Курс валют</h1>\n      <CurrencyRate rates={rates} setData={setData} />\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const API = {\r\n  getRates: async () => {\r\n    try {\r\n      const response = await fetch('https://www.cbr-xml-daily.ru/daily_json.js')\r\n      return response.json()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  },\r\n  getRatesForTenDays: async url => {\r\n    try {\r\n      const response = await fetch(url)\r\n      return response.json()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  },\r\n}\r\n","export const GET_DATA = 'GET_DATA'\r\nexport const GET_DATA_FOR_TEN_DAYS = 'GET_DATA_FOR_TEN_DAYS'\r\nexport const GET_DATA_ONE_RATE = 'GET_DATA_ONE_RATE'\r\n","import { GET_DATA, GET_DATA_FOR_TEN_DAYS, GET_DATA_ONE_RATE } from '../types'\r\n\r\nconst handlers = {\r\n  [GET_DATA]: (state, action) => ({\r\n    ...state,\r\n    rates: action.data.Valute,\r\n  }),\r\n  [GET_DATA_FOR_TEN_DAYS]: (state, action) => ({\r\n    ...state,\r\n    currencyRatesForTenDays: [...state.currencyRatesForTenDays, action.dataPreviousDay],\r\n  }),\r\n  [GET_DATA_ONE_RATE]: (state, action) => ({\r\n    ...state,\r\n    dataOneRate: state.currencyRatesForTenDays.map(rates => {\r\n      Object.values(rates.Valute).filter(rate => {\r\n        return rate === action.rate\r\n      })\r\n    }),\r\n  }),\r\n\r\n  DEFAULT: state => state,\r\n}\r\n\r\nexport const rateReducer = (state, action) => {\r\n  const handler = handlers[action.type] || handlers.DEFAULT\r\n  return handler(state, action)\r\n}\r\n","import React, { useReducer } from 'react'\r\nimport { API } from '../../api'\r\nimport { GET_DATA, GET_DATA_FOR_TEN_DAYS, GET_DATA_ONE_RATE } from '../types'\r\nimport { RateContext } from './RateContext'\r\nimport { rateReducer } from './rateReducer'\r\n\r\nexport const RateState = ({ children }) => {\r\n  const initialState = {\r\n    rates: null,\r\n    dataOneRate: null,\r\n    currencyRatesForTenDays: [],\r\n  }\r\n\r\n  const [state, dispatch] = useReducer(rateReducer, initialState)\r\n\r\n  const setData = async () => {\r\n    const data = await API.getRates()\r\n    dispatch({ type: GET_DATA, data })\r\n    await setCurrencyRatesForTenDays(data.PreviousURL)\r\n  }\r\n\r\n  const setCurrencyRatesForTenDays = async url => {\r\n    let previousURL = url\r\n    for (let i = 0; i < 10; i++) {\r\n      const dataPreviousDay = await API.getRatesForTenDays(previousURL)\r\n      dispatch({ type: GET_DATA_FOR_TEN_DAYS, dataPreviousDay })\r\n      previousURL = dataPreviousDay.PreviousURL\r\n    }\r\n  }\r\n\r\n  const setDataOneRate = async rate => {\r\n    dispatch({ type: GET_DATA_ONE_RATE, rate })\r\n  }\r\n\r\n  return (\r\n    <RateContext.Provider\r\n      value={{\r\n        rates: state.rates,\r\n        dataOneRate: state.dataOneRate,\r\n        setData,\r\n        setDataOneRate,\r\n      }}\r\n    >\r\n      {children}\r\n    </RateContext.Provider>\r\n  )\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { RateState } from './context/rateContext/RateState';\n\nReactDOM.render(\n  <React.StrictMode>\n    <RateState>\n      <App />\n    </RateState>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tooltip_container\":\"tooltip_tooltip_container__hcm56\",\"tooltip_box\":\"tooltip_tooltip_box__2y65k\",\"visible\":\"tooltip_visible__3ud--\",\"tooltip_arrow\":\"tooltip_tooltip_arrow__Vsrsm\"};"],"sourceRoot":""}